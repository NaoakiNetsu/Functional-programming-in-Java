### Callback とは？
「関数の実行中に、実行される関数」を**コールバック関数**と呼びます。

実装方法は、ある関数の引数としてコールバック関数を渡すことで、任意のタイミングでコールバック関数を実行させることができます。  
「あの処理が終わった後に、この関数を実行したい」などが実現できます。

参考①：[JavaScriptコールバックを整理してみた【再入門】](https://qiita.com/nekoneko-wanwan/items/f6979f687246ba089a35)

### どんな時に使われるのか？
まず、前提としてJavascript は基本的<sup>[※](#ref1)</sup>には並列処理を行えません。すなわち、何かしらの重い処理を実行している間は完了されるまで待ち続ける必要があるということです。  
ここでいう「**重い処理**」とは大量の計算を必要とする処理やサーバサイドへのリクエストおよびレスポンスを必要とする処理などを指します。

計算している間やサーバからのレスポンスを待っている間、UIが動かないのでは困ります。そこで、重たい処理は一旦無視して処理を完了させて、重たい処理が完了したタイミングで続きの処理を実行する「**非同期処理**」という仕組みが考え出されました。

そして、この"続きの処理"を記述した関数が**コールバック関数**なのです。

もちろん、非同期処理を行いたいときにコールバックがよく使われるのですが、単純に後で関数を実行したいときなど、**非同期処理以外の場面でも活用する**ことはできます。  
例えば、引数としてコールバック関数を受け取る関数を用意しておき、その関数の呼び出し方（引数に何を渡すか）によって結果を変えれるようにするなどが考えられます。

<a name="ref1"></a>※ [Web Workers](https://ja.wikipedia.org/wiki/Web_Worker)と呼ばれるAPIを用いることでマルチスレッドでの処理を実現できます。

参考②：[JavaScriptの同期、非同期、コールバック、プロミス辺りを整理してみる](https://qiita.com/YoshikiNakamura/items/732ded26c85a7f771a27)

### 実装方法
コールバック関数を用いた処理を実装してみます（参考②のほとんど~~パクリ~~オマージュですが）。

500円でリンゴを買ったとき、500円もらったことを表示して、非同期でおつりを計算して表示するようなプログラムを考えます。
```Javascript
//asyncBuyApple 関数の定義
var asyncBuyApple = function(payment, callback){
  //setTimeout 関数を用いて以下の処理を非同期処理としている
  setTimeout(function(){
    //おつりの計算。全然重い処理ではないけれど・・
    change = payment - 150;
    //callback 関数を呼び出す
    callback(change);
  }, 0);
}

//関数の呼び出し
//第二引数のcallback 関数には無名関数を定義して渡している
asyncBuyApple(500, function(change) {
    console.log('おつりは' + change + '円です。');
});
console.log('500円いただきました。');

//出力結果
//500円いただきました。
//おつりは350円です。
```

まずは、asyncBuyApple 関数を定義しています。この関数は第一引数に支払われた金額、第二引数にコールバック関数を受け取り、[setTimeout](https://developer.mozilla.org/ja/docs/Web/API/WindowTimers/setTimeout) 関数を用いて非同期処理を定義しています。  
非同期処理の具体的な内容は、引数のpayment からおつりchange を計算し、change を引数としてcallback 関数を実行するという処理になります。

次に、上で定義したasyncBuyApple 関数を呼び出します。第一引数には支払われた金額500円、第二引数にはコールバック関数を渡しています<sup>[※](#ref2)</sup>。asyncBuyApple 関数の処理は非同期処理になるため、asyncBuyApple 関数は完了し「console.log('500円いただきました。')」が実行されます。

最後にsetTimeout の処理が行われ、"おつりは350円です。"がコンソールに表示されて終了です。

↑のプログラム程度であればWebサービス「[JsBin](https://jsbin.com/?html,js,console)」などを使ってすぐに動かすことができるので、試してみるのもいいかもしれません。

<a name="ref2"></a>※ 今回はコールバック関数を**無名関数**で定義して引数に渡しています。再利用性のないコールバック関数は、関数名を付けずに定義するのが一般的です（その場で定義されるので可読性も上がり、関数名の衝突なども起こりません）。
